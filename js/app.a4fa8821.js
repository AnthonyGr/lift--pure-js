(function(){"use strict";var i={1351:function(i,t,o){var e=o(9242),n=o(3396);const s={class:"container"},r=(0,n._)("h1",{class:"header"},"L I F T",-1);function u(i,t,o,e,u,l){const c=(0,n.up)("FloorsList");return(0,n.wg)(),(0,n.iD)("div",s,[r,(0,n.Wm)(c,{floors:u.floors,queue:u.queue,direction:u.direction,position:u.position,onHandleClick:l.handleClick},null,8,["floors","queue","direction","position","onHandleClick"])])}const l={class:"main"},c={class:"floors"};function a(i,t,o,e,s,r){const u=(0,n.up)("CallQueue"),a=(0,n.up)("FloorsItem");return(0,n.wg)(),(0,n.iD)("main",l,[(0,n.Wm)(u,{queue:o.queue},null,8,["queue"]),(0,n._)("div",c,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.floors,(i=>((0,n.wg)(),(0,n.j4)(a,{key:i.id,floor:i,position:o.position,direction:o.direction,onHandleClick:r.hadleClick},null,8,["floor","position","direction","onHandleClick"])))),128))])])}var d=o(7139);const f={class:"queue"};function p(i,t,o,e,s,r){return(0,n.wg)(),(0,n.iD)("div",f,(0,d.zw)(o.queue),1)}var h={props:["queue"]},v=o(89);const m=(0,v.Z)(h,[["render",p],["__scopeId","data-v-428af75d"]]);var q=m;const b={class:"floor"},w=(0,n._)("div",{class:"floor__shaft"},null,-1),_={class:"floor__button"},y=["data-id","disabled"];function k(i,t,o,e,s,r){const u=(0,n.up)("LiftItem");return(0,n.wg)(),(0,n.iD)("div",b,[w,(0,n._)("div",_,[(0,n._)("button",{"data-id":o.floor.id,class:(0,d.C_)(["btn",{"non-active":1===o.floor.id}]),disabled:o.floor.isDisabled,onClick:t[0]||(t[0]=t=>i.$emit("handle-click",o.floor.id))},(0,d.zw)(o.floor.title),11,y)]),1===o.floor.id?((0,n.wg)(),(0,n.j4)(u,{key:0,position:o.position,direction:o.direction},null,8,["position","direction"])):(0,n.kq)("",!0)])}function g(i,t,o,e,s,r){return(0,n.wg)(),(0,n.iD)("div",{class:(0,d.C_)(["lift",{"doors-open":"stay"===o.direction}]),style:(0,d.j5)(r.style)},null,6)}var F={props:["position","direction"],computed:{style(){return{transform:"translateY("+this.position+"px)"}}}};const C=(0,v.Z)(F,[["render",g],["__scopeId","data-v-65faac0f"]]);var D=C,L={components:{LiftItem:D},props:["floor","position","direction"]};const O=(0,v.Z)(L,[["render",k]]);var j=O,I={props:["floors","queue","position","direction"],components:{CallQueue:q,FloorsItem:j},methods:{hadleClick(i){this.$emit("handleClick",i)}}};const x=(0,v.Z)(I,[["render",a],["__scopeId","data-v-72493ac0"]]);var H=x,Z={name:"App",data(){return{position:0,direction:"stay",currentFloor:1,step:102,doorsOpen:!0,floors:[{id:5,title:5,isDisabled:!1},{id:4,title:4,isDisabled:!1},{id:3,title:3,isDisabled:!1},{id:2,title:2,isDisabled:!1},{id:1,title:1,isDisabled:!0}],queue:[]}},methods:{handleClick(i){this.floors.find((t=>t.id===i)).isDisabled=!0,this.queue.push(i),this.queue.push(1),"stay"===this.direction&&this.liftLoop()},async animStep(){console.log("start"),"down"===this.direction?(this.position=this.position+2,this.position<-(this.queue[0]-1)*this.step?requestAnimationFrame(this.animStep):(this.direction="stay",this.currentFloor=this.queue[0],this.queue.splice(0,1),await this.sleep(500),this.activateBtn(),this.liftLoop())):"up"===this.direction&&(this.position=this.position-2,-this.position<(this.queue[0]-1)*this.step?requestAnimationFrame(this.animStep):(this.direction="stay",this.currentFloor=this.queue[0],this.queue.splice(0,1),await this.sleep(500),this.activateBtn(),this.liftLoop()))},moveLift(){requestAnimationFrame(this.animStep)},liftLoop(){this.currentFloor<this.queue[0]&&(this.direction="up",this.moveLift(),console.log("here")),this.currentFloor>this.queue[0]&&(this.direction="down",this.queue[1]<this.currentFloor&&this.queue.splice(0,1),this.moveLift()),this.queue[0]||(this.direction="stay")},activateBtn(){1!==this.currentFloor&&(this.floors.find((i=>i.id===this.currentFloor)).isDisabled=!1)},sleep(i){return new Promise((t=>setTimeout(t,i)))}},components:{FloorsList:H}};const A=(0,v.Z)(Z,[["render",u]]);var S=A;(0,e.ri)(S).mount("#app")}},t={};function o(e){var n=t[e];if(void 0!==n)return n.exports;var s=t[e]={exports:{}};return i[e](s,s.exports,o),s.exports}o.m=i,function(){var i=[];o.O=function(t,e,n,s){if(!e){var r=1/0;for(a=0;a<i.length;a++){e=i[a][0],n=i[a][1],s=i[a][2];for(var u=!0,l=0;l<e.length;l++)(!1&s||r>=s)&&Object.keys(o.O).every((function(i){return o.O[i](e[l])}))?e.splice(l--,1):(u=!1,s<r&&(r=s));if(u){i.splice(a--,1);var c=n();void 0!==c&&(t=c)}}return t}s=s||0;for(var a=i.length;a>0&&i[a-1][2]>s;a--)i[a]=i[a-1];i[a]=[e,n,s]}}(),function(){o.n=function(i){var t=i&&i.__esModule?function(){return i["default"]}:function(){return i};return o.d(t,{a:t}),t}}(),function(){o.d=function(i,t){for(var e in t)o.o(t,e)&&!o.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(i){if("object"===typeof window)return window}}()}(),function(){o.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)}}(),function(){var i={143:0};o.O.j=function(t){return 0===i[t]};var t=function(t,e){var n,s,r=e[0],u=e[1],l=e[2],c=0;if(r.some((function(t){return 0!==i[t]}))){for(n in u)o.o(u,n)&&(o.m[n]=u[n]);if(l)var a=l(o)}for(t&&t(e);c<r.length;c++)s=r[c],o.o(i,s)&&i[s]&&i[s][0](),i[s]=0;return o.O(a)},e=self["webpackChunklift_vue"]=self["webpackChunklift_vue"]||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}();var e=o.O(void 0,[998],(function(){return o(1351)}));e=o.O(e)})();
//# sourceMappingURL=app.a4fa8821.js.map